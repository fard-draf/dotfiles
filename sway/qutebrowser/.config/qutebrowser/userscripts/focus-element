#!/usr/bin/env python3
#
# Auteur: Adapté pour SYS_ADMIN_helper
# Description: Utilise le hinting pour sélectionner n'importe quel élément
# et force le focus clavier dessus en utilisant JavaScript.

import os
from qutebrowser.api import cmd

# Snippet JavaScript qui sera injecté.
# Il rend l'élément focusable, lui donne le focus, puis nettoie derrière lui.
js_script = """
(element) => {
    // Rend l'élément focusable par programmation
    element.setAttribute('tabindex', '-1');
    // Donne le focus
    element.focus();
    // Retire l'attribut pour ne pas perturber la page
    element.removeAttribute('tabindex');
}
"""

# Lance le mode hinting sur TOUS les éléments, et exécute le script JS
# sur l'élément qui sera sélectionné.
cmd.hint("all", js=js_script)
